<div>
    <button mat-raised-button color="primary" routerLink="/product/new">Add Product</button>
</div>


<mat-tab-group (selectedTabChange)="resetSearchTerms()">
    <mat-tab label="For Sale">
        <!-- <mat-form-field>
    <input (keyup)="applyFilter($event.target.value)" matInput placeholder='filter'>
</mat-form-field> -->
        <h1>for sale</h1>
        <div class="mat-elevation-z8">
            <mat-table #forSaleTable [dataSource]="forSaleDataSource" matSort>
                <!-- name Column -->
                <ng-container matColumnDef="name">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                </ng-container>

                <!-- details Column -->
                <ng-container matColumnDef="details">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> details </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.details}} </mat-cell>
                </ng-container>

                <!-- categories Column -->
                <ng-container matColumnDef="categories">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> categories </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <button *ngFor="let category of element.categories.split(',')" mat-raised-button
                            color="primary">{{ category }}</button>
                    </mat-cell>
                </ng-container>

                <!-- name filter header -->
                <ng-container matColumnDef="nameFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <input #forSaleNameFilter placeholder='filter by name' matInput [formControl]="nameFilter">
                    </mat-header-cell>
                </ng-container>

                <!-- details filter header -->
                <ng-container matColumnDef="detailsFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <input placeholder='filter by details' matInput [formControl]="detailsFilter">
                    </mat-header-cell>
                </ng-container>

                <!-- categories filter header -->
                <ng-container matColumnDef="categoriesFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <!-- <input placeholder='filter by categories' matInput [formControl]="categoriesFilter"> -->
                        <mat-form-field>
                            <mat-label>filter by categories</mat-label>
                            <mat-select multiple [formControl]="categoriesFilter">
                                <mat-option *ngFor="let cat of allCategories" value='{{cat}}'>{{cat}}</mat-option>
                                <!-- <mat-option value='2222'>2222</mat-option>
                                <mat-option value='aaa'>aaa</mat-option>
                                <mat-option value='d'>d</mat-option> -->
                            </mat-select>
                        </mat-form-field>
                    </mat-header-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-header-row *matHeaderRowDef="['nameFilter', 'detailsFilter', 'categoriesFilter']"></mat-header-row>
                <mat-row (click)="openDialog(row)"
                    [ngStyle]="{'background-color':row.purchaserName !== null ? '#f4511e' : '#3498DB' }"
                    *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
            <mat-paginator #forSalePaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
    </mat-tab>
    <mat-tab label="Sold">
        <h1>sold</h1>
        <div class="mat-elevation-z8">
            <mat-table #soldTable [dataSource]="soldDataSource" matSort>
                <!-- name Column -->
                <ng-container matColumnDef="name">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> name </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                </ng-container>

                <!-- details Column -->
                <ng-container matColumnDef="details">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> details </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.details}} </mat-cell>
                </ng-container>

                <!-- categories Column -->
                <ng-container matColumnDef="categories">
                    <mat-header-cell mat-sort-header *matHeaderCellDef> categories </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <button *ngFor="let category of element.categories.split(',')" mat-raised-button
                            color="primary">{{ category }}</button>
                    </mat-cell>
                </ng-container>

                <!-- name filter header -->
                <ng-container matColumnDef="nameFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <input placeholder='filter by name' matInput [formControl]="nameFilter">
                    </mat-header-cell>
                </ng-container>

                <!-- details filter header -->
                <ng-container matColumnDef="detailsFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <input placeholder='filter by details' matInput [formControl]="detailsFilter">
                    </mat-header-cell>
                </ng-container>

                <!-- categories filter header -->
                <ng-container matColumnDef="categoriesFilter">
                    <mat-header-cell *matHeaderCellDef>
                        <!-- <input placeholder='filter by categories' matInput [formControl]="categoriesFilter"> -->
                        <mat-form-field>
                            <mat-label>filter by categories</mat-label>
                            <mat-select multiple [formControl]="categoriesFilter">
                                <mat-option *ngFor="let cat of allCategories" value='{{cat}}'>{{cat}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </mat-header-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-header-row *matHeaderRowDef="['nameFilter', 'detailsFilter', 'categoriesFilter']"></mat-header-row>
                <mat-row (click)="openDialog(row)"
                    [ngStyle]="{'background-color':row.purchaserName !== null ? '#f4511e' : '#3498DB' }"
                    *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
            <mat-paginator #soldPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
    </mat-tab>
</mat-tab-group>



instruções:

<ul>
    <li>Clique em Add Product para adicionar um novo produto na lista.</li>
    <li>Alterne entre produtos a venda e vendidos clicando nas guias 'For Sale' e 'Sold'</li>
    <li>há duas formas para organizar a tabela: 
        <ul>
            <li>clicando nos textos 'name' 'details' e 'categories' no cabeçalho você organiza por ordem alfabética os produtos</li>
            <li>digitando um texto nos campos de filtro ou selecionando as categorias em filter by name, details ou category</li>
        </ul>
    </li>
    <li>Clique em um produto da tabela para ver seus detalhes</li>
</ul>  